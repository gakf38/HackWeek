<!DOCTYPE html>
<html>
<head>
	<title>Socket.IO Chat Tutorial</title>
	<style>

		*{
		margin: 0;
		padding: 0;
		box-sizing: border-box; 
		}

		body{
			font: 13px Helvetica, Arial; 
		}

		form{
			background: #000;
			padding: 3px;
			position: fixed; 
			bottom: 0; 
			width: 100%;
		}

		form input{
			border: 0;
			padding: 10px; 
			width: 90%;
			margin-right: .5%;
		}

		form button{
			width: 9%;
			background: rgb(130, 224, 255);
			border: none; 
			padding: 10px; 
		}

		#messages{
			list-style-type none; 
			margin: 0; 
			padding: 0; 
		}

		#messages li{
			padding: 5px 10px;
			height: 50px;
			width: 500px;
			margin: auto;
			font-size: 15px;
			text-align: center;
			word-wrap: break-word;
		}

		#messages li:nth-child(odd) {
			background: #eee;
		}

	</style>
</head>
<body>

	<ol id='messages' class="accordian">

	</ol>

	<button onclick="re_order()">Re-order</button>

	<form action=''>
		<input id='m' autocomplete='off' maxlength=140 placeholder="140 characters remaining"/>
		</input>
		<button>Send</button>
	</form>

	<script src='/socket.io/socket.io.js'></script>
	<script src='http://code.jquery.com/jquery-1.11.1.js'></script>

	<script>
		var socket = io();
		var postNum = 0; 
		$('form').submit(function(){

			socket.emit('chat message', $('#m').val());
			$('#m').val('');
			return false; 
		});

		socket.on('chat message', function(msg){

			if(msg === "/clear"){
				$("#messages").empty();
			}else{
				$("#messages").prepend($('<li class="post" onclick="test()">').text(msg));
				updatePosts();
			}
		});

		function updatePosts(){
			var id = 0; 
			var posts = document.getElementsByClassName("post");
			for(var i = 0; i < posts.length; i++){
				posts[i].id = "post" + id;
				id++;
			}
		}

		function test(){
			//nothing
		}

		function re_order(){
			var posts = document.getElementsByClassName("post");
			var temp = posts[1].innerHTML;
			posts[1].innerHTML = posts[0].innerHTML;
			posts[0].innerHTML = temp;
		}

	</script>
</body>
</html>